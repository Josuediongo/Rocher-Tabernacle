<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <title>Modifier un chant</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="icon" href="/images/logo3.jpg">

  <!-- Bootstrap 5 -->
  <link
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
    rel="stylesheet"
  />
  <!-- Font Awesome -->
  <link
    href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    rel="stylesheet"
  />
</head>
<body class="bg-light">
  <div class="container mt-5">
    <h2 class="mb-4 text-success">
      <i class="fas fa-edit"></i> Modifier le chant
    </h2>

    <form action="/admin/chants/<%= chant.id %>/update" method="POST" enctype="multipart/form-data">
      <div class="row g-3">
        <!-- Titre -->
        <div class="col-md-6">
          <label for="titre" class="form-label">Titre</label>
          <input
            type="text"
            id="titre"
            name="titre"
            class="form-control"
            value="<%= chant.titre %>"
            required
          />
        </div>
        <!-- Compositeur -->
        <div class="col-md-6">
          <label for="compositeur" class="form-label">Compositeur</label>
          <input
            type="text"
            id="compositeur"
            name="compositeur"
            class="form-control"
            value="<%= chant.compositeur %>"
          />
        </div>
        <!-- Langue -->
        <div class="col-md-4">
          <label for="langue" class="form-label">Langue</label>
          <input
            type="text"
            id="langue"
            name="langue"
            class="form-control"
            value="<%= chant.langue %>"
          />
        </div>
        <!-- Numéro de page -->
        <div class="col-md-2">
          <label for="numero_page" class="form-label">Page</label>
          <input
            type="number"
            id="numero_page"
            name="numero_page"
            class="form-control"
            value="<%= chant.numero_page %>"
            min="1"
          />
        </div>
        <!-- Catégorie -->
        <div class="col-md-6">
          <label for="categorie_id" class="form-label">Catégorie</label>
          <select
            id="categorie_id"
            name="categorie_id"
            class="form-select"
            required
          >
            <% categories.forEach(cat => { %>
              <option
                value="<%= cat.id %>"
                <%= cat.id === chant.categorie_id ? 'selected' : '' %>
              >
                <%= cat.nom %>
              </option>
            <% }) %>
          </select>
        </div>
        <!-- Image actuelle -->
        <div class="col-md-6 text-center">
          <label class="form-label">Image actuelle</label><br/>
          <% if (chant.image) { %>
            <img
              src="<%= chant.image %>"
              class="img-thumbnail"
              style="max-height:150px;"
              alt="Image chant"
            />
          <% } else { %>
            <p class="text-muted">Aucune image</p>
          <% } %>
        </div>
        <!-- Changer l’image -->
        <div class="col-md-6">
          <label for="image" class="form-label">Remplacer l’image (optionnel)</label>
          <input
            type="file"
            id="image"
            name="image"
            class="form-control"
            accept="image/*"
          />
        </div>
      </div>

      <!-- Paroles -->
      <div class="mt-3 mb-3">
        <label for="paroles" class="form-label">Paroles</label>
        <textarea
          id="paroles"
          name="paroles"
          class="form-control"
          rows="6"
          required
        ><%= chant.paroles %></textarea>
      </div>

      <!-- Actions -->
      <div class="d-flex gap-2">
        <button type="submit" class="btn btn-success">
          <i class="fas fa-save"></i> Enregistrer
        </button>
        <a href="/admin" class="btn btn-secondary">
          <i class="fas fa-arrow-left"></i> Retour à l’accueil
        </a>
      </div>
    </form>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
